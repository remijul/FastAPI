{"timestamp": "2025-03-22T16:49:28.113701", "level": "INFO", "logger": "app.main", "message": "Request: GET /docs - Client: 127.0.0.1 - Params: ", "module": "main", "function": "log_requests", "line": 164, "process": 26156, "thread": 17036}
{"timestamp": "2025-03-22T16:49:28.118705", "level": "INFO", "logger": "app.main", "message": "Response: GET /docs - Status: 200 - Time: 6.02ms", "module": "main", "function": "log_requests", "line": 173, "process": 26156, "thread": 17036}
{"timestamp": "2025-03-22T16:49:47.099293", "level": "INFO", "logger": "app.main", "message": "Request: GET /docs - Client: 127.0.0.1 - Params: ", "module": "main", "function": "log_requests", "line": 164, "process": 26156, "thread": 17036}
{"timestamp": "2025-03-22T16:49:47.103528", "level": "INFO", "logger": "app.main", "message": "Response: GET /docs - Status: 200 - Time: 5.23ms", "module": "main", "function": "log_requests", "line": 173, "process": 26156, "thread": 17036}
{"timestamp": "2025-03-22T16:52:22.723361", "level": "INFO", "logger": "app.main", "message": "Request: POST /auth/token - Client: 127.0.0.1 - Params: ", "module": "main", "function": "log_requests", "line": 164, "process": 41564, "thread": 18676}
{"timestamp": "2025-03-22T16:52:22.742720", "level": "ERROR", "logger": "app.utils.error_handlers", "message": "Unhandled exception: name 'rate_limiter' is not defined\nRequest: POST http://localhost:8000/auth/token\nClient: 127.0.0.1\nRequest ID: None\n  + Exception Group Traceback (most recent call last):\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 76, in collapse_excgroups\n  |     yield\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 174, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 767, in __aexit__\n  |     raise BaseExceptionGroup(\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 167, in log_requests\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 126, in monitoring_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 106, in rate_limit_middleware\n    |     if rate_limiter.is_rate_limited(request):\n    |        ^^^^^^^^^^^^\n    | NameError: name 'rate_limiter' is not defined\n    +------------------------------------\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    await self.app(scope, receive, _send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 167, in log_requests\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 126, in monitoring_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 106, in rate_limit_middleware\n    if rate_limiter.is_rate_limited(request):\n       ^^^^^^^^^^^^\nNameError: name 'rate_limiter' is not defined\n", "module": "error_handlers", "function": "general_exception_handler", "line": 63, "process": 41564, "thread": 18676}
{"timestamp": "2025-03-22T16:53:14.094774", "level": "INFO", "logger": "app.main", "message": "Request: GET / - Client: 127.0.0.1 - Params: ", "module": "main", "function": "log_requests", "line": 164, "process": 41564, "thread": 18676}
{"timestamp": "2025-03-22T16:53:14.104779", "level": "ERROR", "logger": "app.utils.error_handlers", "message": "Unhandled exception: name 'rate_limiter' is not defined\nRequest: GET http://127.0.0.1:8000/\nClient: 127.0.0.1\nRequest ID: None\n  + Exception Group Traceback (most recent call last):\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 76, in collapse_excgroups\n  |     yield\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 174, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 767, in __aexit__\n  |     raise BaseExceptionGroup(\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 167, in log_requests\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 126, in monitoring_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 106, in rate_limit_middleware\n    |     if rate_limiter.is_rate_limited(request):\n    |        ^^^^^^^^^^^^\n    | NameError: name 'rate_limiter' is not defined\n    +------------------------------------\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    await self.app(scope, receive, _send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 167, in log_requests\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 126, in monitoring_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 106, in rate_limit_middleware\n    if rate_limiter.is_rate_limited(request):\n       ^^^^^^^^^^^^\nNameError: name 'rate_limiter' is not defined\n", "module": "error_handlers", "function": "general_exception_handler", "line": 63, "process": 41564, "thread": 18676}
{"timestamp": "2025-03-22T16:53:14.176739", "level": "INFO", "logger": "app.main", "message": "Request: GET /favicon.ico - Client: 127.0.0.1 - Params: ", "module": "main", "function": "log_requests", "line": 164, "process": 41564, "thread": 18676}
{"timestamp": "2025-03-22T16:53:14.185733", "level": "ERROR", "logger": "app.utils.error_handlers", "message": "Unhandled exception: name 'rate_limiter' is not defined\nRequest: GET http://127.0.0.1:8000/favicon.ico\nClient: 127.0.0.1\nRequest ID: None\n  + Exception Group Traceback (most recent call last):\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 76, in collapse_excgroups\n  |     yield\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 174, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 767, in __aexit__\n  |     raise BaseExceptionGroup(\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 167, in log_requests\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 126, in monitoring_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 106, in rate_limit_middleware\n    |     if rate_limiter.is_rate_limited(request):\n    |        ^^^^^^^^^^^^\n    | NameError: name 'rate_limiter' is not defined\n    +------------------------------------\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    await self.app(scope, receive, _send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 167, in log_requests\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 126, in monitoring_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 106, in rate_limit_middleware\n    if rate_limiter.is_rate_limited(request):\n       ^^^^^^^^^^^^\nNameError: name 'rate_limiter' is not defined\n", "module": "error_handlers", "function": "general_exception_handler", "line": 63, "process": 41564, "thread": 18676}
{"timestamp": "2025-03-22T16:53:51.825727", "level": "INFO", "logger": "app.main", "message": "Request: GET / - Client: 127.0.0.1 - Params: ", "module": "main", "function": "log_requests", "line": 164, "process": 35504, "thread": 40808}
{"timestamp": "2025-03-22T16:53:51.834726", "level": "ERROR", "logger": "app.utils.error_handlers", "message": "Unhandled exception: name 'rate_limiter' is not defined\nRequest: GET http://127.0.0.1:8000/\nClient: 127.0.0.1\nRequest ID: None\n  + Exception Group Traceback (most recent call last):\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 76, in collapse_excgroups\n  |     yield\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 174, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 767, in __aexit__\n  |     raise BaseExceptionGroup(\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 167, in log_requests\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 126, in monitoring_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 106, in rate_limit_middleware\n    |     if rate_limiter.is_rate_limited(request):\n    |        ^^^^^^^^^^^^\n    | NameError: name 'rate_limiter' is not defined\n    +------------------------------------\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    await self.app(scope, receive, _send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 167, in log_requests\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 126, in monitoring_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 106, in rate_limit_middleware\n    if rate_limiter.is_rate_limited(request):\n       ^^^^^^^^^^^^\nNameError: name 'rate_limiter' is not defined\n", "module": "error_handlers", "function": "general_exception_handler", "line": 63, "process": 35504, "thread": 40808}
{"timestamp": "2025-03-22T16:53:51.900127", "level": "INFO", "logger": "app.main", "message": "Request: GET /favicon.ico - Client: 127.0.0.1 - Params: ", "module": "main", "function": "log_requests", "line": 164, "process": 35504, "thread": 40808}
{"timestamp": "2025-03-22T16:53:51.905116", "level": "ERROR", "logger": "app.utils.error_handlers", "message": "Unhandled exception: name 'rate_limiter' is not defined\nRequest: GET http://127.0.0.1:8000/favicon.ico\nClient: 127.0.0.1\nRequest ID: None\n  + Exception Group Traceback (most recent call last):\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 76, in collapse_excgroups\n  |     yield\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 174, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 767, in __aexit__\n  |     raise BaseExceptionGroup(\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 167, in log_requests\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 126, in monitoring_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 106, in rate_limit_middleware\n    |     if rate_limiter.is_rate_limited(request):\n    |        ^^^^^^^^^^^^\n    | NameError: name 'rate_limiter' is not defined\n    +------------------------------------\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    await self.app(scope, receive, _send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 167, in log_requests\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 126, in monitoring_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 106, in rate_limit_middleware\n    if rate_limiter.is_rate_limited(request):\n       ^^^^^^^^^^^^\nNameError: name 'rate_limiter' is not defined\n", "module": "error_handlers", "function": "general_exception_handler", "line": 63, "process": 35504, "thread": 40808}
{"timestamp": "2025-03-22T16:57:58.584113", "level": "INFO", "logger": "app.main", "message": "Request: GET / - Client: 127.0.0.1 - Params: ", "module": "main", "function": "log_requests", "line": 164, "process": 45496, "thread": 34376}
{"timestamp": "2025-03-22T16:57:58.600116", "level": "ERROR", "logger": "app.utils.error_handlers", "message": "Unhandled exception: name 'rate_limiter' is not defined\nRequest: GET http://127.0.0.1:8000/\nClient: 127.0.0.1\nRequest ID: None\n  + Exception Group Traceback (most recent call last):\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 76, in collapse_excgroups\n  |     yield\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 174, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 767, in __aexit__\n  |     raise BaseExceptionGroup(\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 167, in log_requests\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 126, in monitoring_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 106, in rate_limit_middleware\n    |     if rate_limiter.is_rate_limited(request):\n    |        ^^^^^^^^^^^^\n    | NameError: name 'rate_limiter' is not defined\n    +------------------------------------\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    await self.app(scope, receive, _send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 167, in log_requests\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 126, in monitoring_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 106, in rate_limit_middleware\n    if rate_limiter.is_rate_limited(request):\n       ^^^^^^^^^^^^\nNameError: name 'rate_limiter' is not defined\n", "module": "error_handlers", "function": "general_exception_handler", "line": 63, "process": 45496, "thread": 34376}
{"timestamp": "2025-03-22T16:57:58.713212", "level": "INFO", "logger": "app.main", "message": "Request: GET /favicon.ico - Client: 127.0.0.1 - Params: ", "module": "main", "function": "log_requests", "line": 164, "process": 45496, "thread": 34376}
{"timestamp": "2025-03-22T16:57:58.724196", "level": "ERROR", "logger": "app.utils.error_handlers", "message": "Unhandled exception: name 'rate_limiter' is not defined\nRequest: GET http://127.0.0.1:8000/favicon.ico\nClient: 127.0.0.1\nRequest ID: None\n  + Exception Group Traceback (most recent call last):\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 76, in collapse_excgroups\n  |     yield\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 174, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 767, in __aexit__\n  |     raise BaseExceptionGroup(\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 167, in log_requests\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 126, in monitoring_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 106, in rate_limit_middleware\n    |     if rate_limiter.is_rate_limited(request):\n    |        ^^^^^^^^^^^^\n    | NameError: name 'rate_limiter' is not defined\n    +------------------------------------\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    await self.app(scope, receive, _send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 167, in log_requests\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 126, in monitoring_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 106, in rate_limit_middleware\n    if rate_limiter.is_rate_limited(request):\n       ^^^^^^^^^^^^\nNameError: name 'rate_limiter' is not defined\n", "module": "error_handlers", "function": "general_exception_handler", "line": 63, "process": 45496, "thread": 34376}
{"timestamp": "2025-03-22T17:01:29.143123", "level": "INFO", "logger": "app.main", "message": "Request: GET / - Client: 127.0.0.1 - Params: ", "module": "main", "function": "log_requests", "line": 157, "process": 48900, "thread": 47044}
{"timestamp": "2025-03-22T17:01:29.145144", "level": "WARNING", "logger": "app.utils.error_handlers", "message": "HTTP exception: 401 - Not authenticated", "module": "error_handlers", "function": "http_exception_handler", "line": 42, "process": 48900, "thread": 47044}
{"timestamp": "2025-03-22T17:01:29.147146", "level": "INFO", "logger": "app.main", "message": "Response: GET / - Status: 401 - Time: 5.36ms", "module": "main", "function": "log_requests", "line": 166, "process": 48900, "thread": 47044}
{"timestamp": "2025-03-22T17:01:29.182303", "level": "INFO", "logger": "app.main", "message": "Request: GET /favicon.ico - Client: 127.0.0.1 - Params: ", "module": "main", "function": "log_requests", "line": 157, "process": 48900, "thread": 47044}
{"timestamp": "2025-03-22T17:01:29.185278", "level": "WARNING", "logger": "app.utils.error_handlers", "message": "HTTP exception: 404 - Not Found", "module": "error_handlers", "function": "http_exception_handler", "line": 42, "process": 48900, "thread": 47044}
{"timestamp": "2025-03-22T17:01:29.187270", "level": "INFO", "logger": "app.main", "message": "Response: GET /favicon.ico - Status: 404 - Time: 4.96ms", "module": "main", "function": "log_requests", "line": 166, "process": 48900, "thread": 47044}
{"timestamp": "2025-03-23T18:11:45.691095", "level": "INFO", "logger": "app.main", "message": "Request: GET /docs - Client: 127.0.0.1 - Params: ", "module": "main", "function": "log_requests", "line": 157, "process": 13204, "thread": 47296}
{"timestamp": "2025-03-23T18:11:45.696094", "level": "INFO", "logger": "app.main", "message": "Response: GET /docs - Status: 200 - Time: 5.01ms", "module": "main", "function": "log_requests", "line": 166, "process": 13204, "thread": 47296}
{"timestamp": "2025-03-23T18:13:34.275597", "level": "INFO", "logger": "app.main", "message": "Request: POST /auth/token - Client: 127.0.0.1 - Params: ", "module": "main", "function": "log_requests", "line": 157, "process": 13204, "thread": 47296}
{"timestamp": "2025-03-23T18:13:34.577418", "level": "ERROR", "logger": "app.utils.error_handlers", "message": "Unhandled exception: name 'request' is not defined\nRequest: POST http://localhost:8000/auth/token\nClient: 127.0.0.1\nRequest ID: 6abe5ebd-1dd0-4fd6-bcbc-ac29668687d5\n  + Exception Group Traceback (most recent call last):\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 76, in collapse_excgroups\n  |     yield\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 174, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 767, in __aexit__\n  |     raise BaseExceptionGroup(\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 160, in log_requests\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 119, in monitoring_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 105, in rate_limit_middleware\n    |     return await call_next(request)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\middleware\\rate_limit.py\", line 87, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\middleware\\security.py\", line 49, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\middleware\\security.py\", line 34, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\middleware\\security.py\", line 12, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 85, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 62, in __call__\n    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 714, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 734, in app\n    |     await route.handle(scope, receive, send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 288, in handle\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 76, in app\n    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 73, in app\n    |     response = await f(request)\n    |                ^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 301, in app\n    |     raw_response = await run_endpoint_function(\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 214, in run_endpoint_function\n    |     return await run_in_threadpool(dependant.call, **values)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\concurrency.py\", line 37, in run_in_threadpool\n    |     return await anyio.to_thread.run_sync(func)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    |     return await get_async_backend().run_sync_in_worker_thread(\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2461, in run_sync_in_worker_thread\n    |     return await future\n    |            ^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 962, in run\n    |     result = context.run(func, *args)\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\api\\auth.py\", line 61, in login_for_access_token\n    |     client_ip = request.client.host\n    |                 ^^^^^^^\n    | NameError: name 'request' is not defined\n    +------------------------------------\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    await self.app(scope, receive, _send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 160, in log_requests\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 119, in monitoring_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 105, in rate_limit_middleware\n    return await call_next(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\middleware\\rate_limit.py\", line 87, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\middleware\\security.py\", line 49, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\middleware\\security.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\middleware\\security.py\", line 12, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 85, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 714, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 734, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 288, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 76, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 73, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 301, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 214, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\concurrency.py\", line 37, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2461, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 962, in run\n    result = context.run(func, *args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\api\\auth.py\", line 61, in login_for_access_token\n    client_ip = request.client.host\n                ^^^^^^^\nNameError: name 'request' is not defined\n", "module": "error_handlers", "function": "general_exception_handler", "line": 63, "process": 13204, "thread": 47296}
{"timestamp": "2025-03-23T18:20:02.500896", "level": "INFO", "logger": "app.main", "message": "Request: POST /auth/token - Client: 127.0.0.1 - Params: ", "module": "main", "function": "log_requests", "line": 157, "process": 13204, "thread": 47296}
{"timestamp": "2025-03-23T18:20:02.734353", "level": "ERROR", "logger": "app.utils.error_handlers", "message": "Unhandled exception: name 'request' is not defined\nRequest: POST http://localhost:8000/auth/token\nClient: 127.0.0.1\nRequest ID: 10637b9c-33bd-457a-ae87-5529f27a7faf\n  + Exception Group Traceback (most recent call last):\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 76, in collapse_excgroups\n  |     yield\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 174, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 767, in __aexit__\n  |     raise BaseExceptionGroup(\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 160, in log_requests\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 119, in monitoring_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 105, in rate_limit_middleware\n    |     return await call_next(request)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\middleware\\rate_limit.py\", line 87, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\middleware\\security.py\", line 49, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\middleware\\security.py\", line 34, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\middleware\\security.py\", line 12, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    |     raise app_exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 85, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 62, in __call__\n    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 714, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 734, in app\n    |     await route.handle(scope, receive, send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 288, in handle\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 76, in app\n    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 73, in app\n    |     response = await f(request)\n    |                ^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 301, in app\n    |     raw_response = await run_endpoint_function(\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 214, in run_endpoint_function\n    |     return await run_in_threadpool(dependant.call, **values)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\concurrency.py\", line 37, in run_in_threadpool\n    |     return await anyio.to_thread.run_sync(func)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    |     return await get_async_backend().run_sync_in_worker_thread(\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2461, in run_sync_in_worker_thread\n    |     return await future\n    |            ^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 962, in run\n    |     result = context.run(func, *args)\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\api\\auth.py\", line 61, in login_for_access_token\n    |     client_ip = request.client.host\n    |                 ^^^^^^^\n    | NameError: name 'request' is not defined\n    +------------------------------------\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 165, in __call__\n    await self.app(scope, receive, _send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 160, in log_requests\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 119, in monitoring_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\main.py\", line 105, in rate_limit_middleware\n    return await call_next(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\middleware\\rate_limit.py\", line 87, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\middleware\\security.py\", line 49, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\middleware\\security.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 173, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 82, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 175, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\middleware\\security.py\", line 12, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 153, in call_next\n    raise app_exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 140, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 85, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 714, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 734, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 288, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 76, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 73, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 301, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 214, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\starlette\\concurrency.py\", line 37, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2461, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 962, in run\n    result = context.run(func, *args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\R\u00e9miJulien\\OneDrive\\Documents\\DcidConsulting\\2.Prestation\\3.Formation\\3.Production\\2025_FASTAPI\\advanced\\step2\\app\\api\\auth.py\", line 61, in login_for_access_token\n    client_ip = request.client.host\n                ^^^^^^^\nNameError: name 'request' is not defined\n", "module": "error_handlers", "function": "general_exception_handler", "line": 63, "process": 13204, "thread": 47296}
